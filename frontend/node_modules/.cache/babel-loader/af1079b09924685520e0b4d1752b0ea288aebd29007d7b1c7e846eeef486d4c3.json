{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"h2\", null, \"Lista de Agendamentos\", -1 /* HOISTED */)), $data.agendamentos.length > 0 ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_1, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.agendamentos, a => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: a.id\n    }, [_cache[0] || (_cache[0] = _createElementVNode(\"strong\", null, \"Paciente:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($options.getPacienteNome(a.paciente_id)) + \" — \", 1 /* TEXT */), _cache[1] || (_cache[1] = _createElementVNode(\"strong\", null, \"Profissional:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($options.getProfissionalNome(a.profissional_id)) + \" — \", 1 /* TEXT */), _cache[2] || (_cache[2] = _createElementVNode(\"strong\", null, \"Data:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($options.formatarDataHora(a.data_hora)) + \" — \", 1 /* TEXT */), _cache[3] || (_cache[3] = _createElementVNode(\"strong\", null, \"Status:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(a.status) + \" \", 1 /* TEXT */), _createElementVNode(\"button\", {\n      onClick: $event => $options.cancelarAgendamento(a.id),\n      style: {\n        \"margin-left\": \"10px\"\n      }\n    }, \"Cancelar\", 8 /* PROPS */, _hoisted_2)]);\n  }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"p\", _hoisted_3, \"Nenhum agendamento encontrado.\"))]);\n}","map":{"version":3,"names":["key","_createElementBlock","_createElementVNode","$data","agendamentos","length","_hoisted_1","_Fragment","_renderList","a","id","_createTextVNode","_toDisplayString","$options","getPacienteNome","paciente_id","getProfissionalNome","profissional_id","formatarDataHora","data_hora","status","onClick","$event","cancelarAgendamento","style","_hoisted_2","_hoisted_3"],"sources":["E:\\PROGRAMAS\\agenda-facil\\frontend\\src\\components\\AgendamentoList.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>Lista de Agendamentos</h2>\r\n\r\n    <ul v-if=\"agendamentos.length > 0\">\r\n      <li v-for=\"a in agendamentos\" :key=\"a.id\">\r\n        <strong>Paciente:</strong> {{ getPacienteNome(a.paciente_id) }} —\r\n        <strong>Profissional:</strong> {{ getProfissionalNome(a.profissional_id) }} —\r\n        <strong>Data:</strong> {{ formatarDataHora(a.data_hora) }} —\r\n        <strong>Status:</strong> {{ a.status }}\r\n        <button @click=\"cancelarAgendamento(a.id)\" style=\"margin-left: 10px;\">Cancelar</button>\r\n      </li>\r\n    </ul>\r\n\r\n    <p v-else>Nenhum agendamento encontrado.</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      agendamentos: [],\r\n      pacientes: [],\r\n      profissionais: []\r\n    };\r\n  },\r\n  async mounted() {\r\n    await Promise.all([\r\n      this.carregarAgendamentos(),\r\n      this.carregarPacientes(),\r\n      this.carregarProfissionais()\r\n    ]);\r\n  },\r\n  methods: {\r\n    async carregarAgendamentos() {\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/api/agendamentos');\r\n        this.agendamentos = response.data;\r\n      } catch (error) {\r\n        console.error('Erro ao buscar agendamentos:', error);\r\n      }\r\n    },\r\n    async carregarPacientes() {\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/api/pacientes');\r\n        this.pacientes = response.data;\r\n      } catch (error) {\r\n        console.error('Erro ao buscar pacientes:', error);\r\n      }\r\n    },\r\n    async carregarProfissionais() {\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/api/funcionarios');\r\n        this.profissionais = response.data;\r\n      } catch (error) {\r\n        console.error('Erro ao buscar profissionais:', error);\r\n      }\r\n    },\r\n    formatarDataHora(dataHora) {\r\n      const data = new Date(dataHora);\r\n      return data.toLocaleString('pt-BR');\r\n    },\r\n    getPacienteNome(id) {\r\n      const paciente = this.pacientes.find(p => p.id === id);\r\n      return paciente ? paciente.nome : `ID ${id}`;\r\n    },\r\n    getProfissionalNome(id) {\r\n      const profissional = this.profissionais.find(f => f.id === id);\r\n      return profissional ? profissional.nome : `ID ${id}`;\r\n    },\r\n    async cancelarAgendamento(id) {\r\n      const confirmar = confirm(\"Tem certeza que deseja cancelar este agendamento?\");\r\n      if (!confirmar) return;\r\n\r\n      try {\r\n        await axios.delete(`http://localhost:5000/api/agendamentos/${id}`);\r\n        this.agendamentos = this.agendamentos.filter(a => a.id !== id);\r\n      } catch (error) {\r\n        console.error('Erro ao cancelar agendamento:', error);\r\n        alert('Erro ao cancelar agendamento.');\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbutton {\r\n  background-color: #e74c3c;\r\n  color: white;\r\n  border: none;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\nbutton:hover {\r\n  background-color: #c0392b;\r\n}\r\n</style>\r\n"],"mappings":";;EAAAA,GAAA;AAAA;mBAAA;;EAAAA,GAAA;AAAA;;uBACEC,mBAAA,CAcM,c,0BAbJC,mBAAA,CAA8B,YAA1B,uBAAqB,sBAEfC,KAAA,CAAAC,YAAY,CAACC,MAAM,Q,cAA7BJ,mBAAA,CAQK,MAZTK,UAAA,I,kBAKML,mBAAA,CAMKM,SAAA,QAXXC,WAAA,CAKsBL,KAAA,CAAAC,YAAY,EAAjBK,CAAC;yBAAZR,mBAAA,CAMK;MAN0BD,GAAG,EAAES,CAAC,CAACC;kCACpCR,mBAAA,CAA0B,gBAAlB,WAAS,sBANzBS,gBAAA,CAMkC,GAAC,GAAAC,gBAAA,CAAGC,QAAA,CAAAC,eAAe,CAACL,CAAC,CAACM,WAAW,KAAI,KAC/D,iB,0BAAAb,mBAAA,CAA8B,gBAAtB,eAAa,sBAP7BS,gBAAA,CAOsC,GAAC,GAAAC,gBAAA,CAAGC,QAAA,CAAAG,mBAAmB,CAACP,CAAC,CAACQ,eAAe,KAAI,KAC3E,iB,0BAAAf,mBAAA,CAAsB,gBAAd,OAAK,sBARrBS,gBAAA,CAQ8B,GAAC,GAAAC,gBAAA,CAAGC,QAAA,CAAAK,gBAAgB,CAACT,CAAC,CAACU,SAAS,KAAI,KAC1D,iB,0BAAAjB,mBAAA,CAAwB,gBAAhB,SAAO,sBATvBS,gBAAA,CASgC,GAAC,GAAAC,gBAAA,CAAGH,CAAC,CAACW,MAAM,IAAG,GACvC,iBAAAlB,mBAAA,CAAuF;MAA9EmB,OAAK,EAAAC,MAAA,IAAET,QAAA,CAAAU,mBAAmB,CAACd,CAAC,CAACC,EAAE;MAAGc,KAA0B,EAA1B;QAAA;MAAA;OAA2B,UAAQ,iBAVtFC,UAAA,E;qDAcIxB,mBAAA,CAA4C,KAdhDyB,UAAA,EAcc,gCAA8B,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}